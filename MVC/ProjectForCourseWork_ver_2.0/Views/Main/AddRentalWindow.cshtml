@using Common.DTO
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>AddRentalWindow</title>
</head>
<body>
    <div class="demo-section k-content">
        <ul id="fieldlist">
            <li>
                <label for="organizations">Организация:</label>
                @(Html.Kendo()
                      .ComboBox()
                      .Name("organizations")
                      .HtmlAttributes(new { style = "width:100%;" })
                      .Placeholder("Выберите организацию...")
                      .DataTextField("Name")
                      .DataValueField("Id")
                      .Filter(FilterType.Contains)
                      .DataSource(source =>
                      {
                          source.Read(read =>
                          {
                              read.Action("CascadingGetOrganizations", "Main");
                          });
                      })
                )
            </li>
            <li>
                <label for="buildings">Здание:</label>
                @(Html.Kendo().ComboBox()
                .Name("buildings")
                .HtmlAttributes(new { style = "width:100%;" })
                .Placeholder("Выберите здание...")
                .DataTextField("Name")
                .DataValueField("Id")
                .Filter(FilterType.Contains)
                .DataSource(source =>
                {
                    source.Read(read =>
                    {
                        read.Action("CascadingGetBuildings", "Main");
                    });
                })
                )
            </li>
            <li>
                <label for="rooms">Помещение:</label>
                @(Html.Kendo().ComboBox()
                .Name("rooms")
                .HtmlAttributes(new { style = "width:100%;" })
                .Placeholder("Выберите помещение...")
                .DataTextField("Number")
                .DataValueField("Id")
                .Filter(FilterType.Contains)
                .DataSource(source =>
                {
                    source.Read(read =>
                    {
                        read.Action("CascadingGetRooms", "Main").Data("filterBuildings");
                    })
                    .ServerFiltering(true);
                })
                .Enable(false)
                .AutoBind(false)
                .CascadeFrom("buildings")
                )
            </li>
            <li>
                <label for="inputDate">Дата въезда:</label>
                @(Html.Kendo().DatePicker()
                  .Name("inputDate")
                  .HtmlAttributes(new { style = "width: 100%"})
                )
            </li>
            <li>
                <label for="outputDate">Дата выезда:</label>
                @(Html.Kendo().DatePicker()
                  .Name("outputDate")
                  .HtmlAttributes(new { style = "width: 100%"})
                )
            </li>
            <li>
                <button class="k-button k-primary" id="add">Добавить</button>
            </li>
        </ul>
    </div>
    <style>
        #fieldlist {
    margin: 0;
    padding: 0;
    }

    #fieldlist li {
        list-style: none;
        padding-bottom: 1.5em;
        text-align: left;
    }

    #fieldlist label {
        display: block;
        padding-bottom: .3em;
        font-weight: bold;
        text-transform: uppercase;
        font-size: 12px;
    }
</style>
<script>
    var Room_rental = {
            InputDate: 0,
            OutputDate: 0,
            RoomId: 0,
            OrganizationId: 0
        }//Model

    $(document).ready(function () {
       $("#add").click(function (e) {
            var options = {};
            options.url = 'http://localhost:57109/RoomsRental/AddRentalRoom';
            options.type = "POST";
            var room_rental = Room_rental;
            room_rental.InputDate = $("#inputDate").val();
            room_rental.OutputDate = $("#outputDate").val();
            room_rental.RoomId = $("#rooms").val();
            room_rental.OrganizationId = $("#organizations").val();
            console.dir(room_rental);
            options.data = JSON.stringify(room_rental);
            options.contentType = "application/json";
            options.dataType = "html";
            //options.success = function () {
            //    getDetails(planetId);
            //};
            $.ajax(options);
        });
    });
</script>

</body>
</html>
